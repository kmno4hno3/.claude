# ガイドライン

このドキュメントは、プロジェクトのルール、目標、進行管理方法を定義します。以下の内容に従ってプロジェクトを進めてください。

## トップレベルルール

- 効率を最大化するため、**複数の独立したプロセスを実行する必要がある場合は、逐次実行ではなく並行してツールを呼び出してください**。
- **英語でのみ思考する必要があります**。ただし、**日本語で応答する必要があります**。
- ライブラリの使用方法を理解するために、**常にContex7 MCPを使用して**最新情報を取得してください。
- 設計の一時的なメモには、`.tmp`にマークダウンを作成して保存してください。
- **WriteまたはEditツールを使用した後は、system-reminderの内容に関係なく、常にReadツールを使用して実際のファイル内容を確認してください**。system-reminderは、ファイルが正常に書き込まれている場合でも、誤って「(内容なし)」と表示することがあります。
- 私の意見にお世辞を言わず批判的に応答してください。ただし、批判において強制的にならないでください。
- **ファイルにテキストを書き込むときは、極力日本語で書いてください**。

## プログラミングルール

- 絶対に必要でない限り、ハードコーディングを避けてください。
- TypeScriptで`any`や`unknown`型を使用しないでください。
- TypeScriptの`class`は絶対に必要でない限り使用しないでください（例：`instanceof`チェックが必要なカスタムエラーハンドリングのため`Error`クラスを拡張する場合）。

## 開発スタイル - 仕様駆動開発

### 概要

開発タスクを受け取った際は、以下の5段階ワークフローに従ってください。これにより、要件の明確化、構造化された設計、包括的なテスト、効率的な実装が保証されます。

### 5段階ワークフロー

#### ステージ1: 要件

- ユーザーリクエストを分析し、明確な機能要件に変換
- 要件を`.tmp/requirements.md`にドキュメント化
- 詳細テンプレートには`/requirements`コマンドを使用

#### ステージ2: 設計

- 要件に基づいて技術設計を作成
- 設計を`.tmp/design.md`にドキュメント化
- 詳細テンプレートには`/design`コマンドを使用

#### ステージ3: テスト設計

- 設計に基づいて包括的なテスト仕様を作成
- テストケースを`.tmp/test_design.md`にドキュメント化
- 詳細テンプレートには`/test-design`コマンドを使用

#### ステージ4: タスクリスト

- 設計とテストケースを実装可能な単位に分割
- `.tmp/tasks.md`にドキュメント化
- 詳細テンプレートには`/tasks`コマンドを使用
- 主要なタスクはTodoWriteツールで管理

#### ステージ5: 実装

- タスクリストに従って実装
- 各タスクについて：
  - TodoWriteを使用してタスクをin_progressに更新
  - 実装とテストを実行
  - lintとtypecheckを実行
  - TodoWriteを使用してタスクをcompletedに更新

### ワークフローコマンド

- `/spec` - 完全な仕様駆動開発ワークフローを開始
- `/requirements` - ステージ1：要件のみを実行
- `/design` - ステージ2：設計のみを実行（要件が必要）
- `/test-design` - ステージ3：テスト設計のみを実行（設計が必要）
- `/tasks` - ステージ4：タスク分割のみを実行（設計とテスト設計が必要）

### 重要な注意事項

- 各ステージは前のステージの成果物に依存します
- 次のステージに進む前にユーザーの確認を得てください
- 複雑なタスクや新機能開発には常にこのワークフローを使用してください
- 単純な修正や明確なバグ修正は直接実装できます

# 重要な指示リマインダー
求められたことを実行してください。それ以上でも以下でもありません。
目標達成に絶対に必要でない限り、ファイルを作成しないでください。
新しいファイルを作成するよりも、既存のファイルを編集することを常に優先してください。
ドキュメントファイル（*.md）やREADMEファイルを能動的に作成しないでください。ユーザーが明示的に要求した場合のみ、ドキュメントファイルを作成してください。