---
allowed-tools: TodoWrite, TodoRead, Read, Write, MultiEdit, Bash(mkdir:*), Bash(gh pr view:*), Bash(gh pr diff:*), mcp__serena__find_file, mcp__serena__find_symbol, mcp__serena__list_memories, mcp__serena__search_for_pattern
description: 確立されたガイドラインに従ってプルリクエストの詳細なコードレビューを実行し、コード品質、ベストプラクティス、保守性に焦点を当てて建設的なフィードバックを提供します
---

## コードレビュールール

コマンド引数で提供されたPR番号で指定されたプルリクエストをレビューします。

使用方法: `/code-review <PR_NUMBER>`
例: `/code-review 001`

PR番号は `$ARGUMENTS` として利用できます。

レビュープロセス:

**重要: 既存のファイルやコードを調査する際は、serenaを使用する必要があります。serenaを使用することで、トークン消費量を60-80%削減し、セマンティック検索機能を通じて必要な情報を効率的に取得できます。**

1. **PR情報の取得:** GitHub CLI（`gh pr view $arguments`）を使用してPRの詳細を取得
2. **変更の調査:** "gh pr diff $arguments"を使用してコード変更を確認
3. **コードレビューの実行:** PRの詳細を確認し、コードレビューを実行
4. **レビューの実施:** 「コメント記述の重要ガイドライン」に従ってコードレビューを実行
5. **レビュー結果の報告:** pull_request_reviewのようなものを使用する代わりに、レビュー結果を`.tmp`に保存。改善点や懸念事項がある行にコメントを追加。修正が明確な場合は、積極的に提案を使用

**コメント記述の重要ガイドライン**

- **インラインコメントの構造:**

  - **結論で締める:** 要点の一行要約を使用して、コードの違い、行数、ファイル名、レビュー内容を記述
  - **理由と提案:** 結論の後に、理由、背景、具体的な提案の詳細な説明を提供
  - **問題に焦点:** インラインコメントは、バグ修正、潜在的なバグ、可読性の問題など、具体的な改善点に焦点を当てる

- **ポジティブフィードバックについて:**

  - **インラインで選択的に:** 他の開発者が学べる例外的な設計選択や革新的な実装のみを言及
  - **ポジティブな点をまとめる:** レビュー提出時に、全体的なポジティブな側面と一般的な印象をサマリーコメントにまとめる

- **レビュー形式**
  - **マークダウンでレビューを記述:** レビュー結果を`.tmp`に保存
  - **日本語でレビューを記述:** 以下の形式でコードレビューを記述してください

---

# PR番号とタイトル

## 変更概要

## 変更ファイル

## コード変更の詳細分析

## レビューコメント

### 良い点

### 改善点・確認点

## 結論

---

**レビューの観点**

レビュー時は以下の側面に焦点を当てる:

- CLAUDE.mdガイドラインへの準拠
- コード品質とベストプラクティスの遵守
  - 責任の適切な分離
  - コードの再利用性の最大化
  - 不要なコードの回避
  - パフォーマンスへの影響が大きくない限り、すべてのAPIデータを返す
  - テストでのオブジェクト等価性の検証
  - アプリ全体での一貫したスタイリングの適用
  - 変数命名の一貫性の維持
  - フロントエンドエラーの日本語表示、生レスポンスの回避
  - 適切な処理場所の検討（バックエンド vs フロントエンド）
- バグやセキュリティリスクのチェック
- パフォーマンスの懸念の特定
- 保守性と可読性の確保
- 設計とアーキテクチャの決定の検証

**追加注意事項**

- 日本語でフィードバックを提供
- 具体的で実行可能なフィードバックを提供

think super hard
