---
allowed-tools: Bash, TodoWrite, Grep, Read, LS
description: プルリクエストを作成してリモートリポジトリにプッシュする
---

# プルリクエスト作成・プッシュコマンド

## コンテキスト
- 引数の説明：$ARGUMENTS（プルリクエストのタイトル。省略時は最新コミットメッセージを使用）
- 現在のブランチの変更をリモートリポジトリにプッシュし、プルリクエストを作成する
- GitHub CLIを使用してプルリクエストを作成する

## あなたのタスク

### 1. 前提条件の確認

- git statusで現在のブランチと変更状況を確認
- リモートリポジトリへの接続状況を確認
- GitHub CLI（gh）の認証状態を確認
- 未コミットの変更がないことを確認

### 2. 現在の状態分析

- git statusで現在のブランチ名を取得
- git log --oneline -1でコミット履歴を確認
- リモートブランチの存在確認
- ローカルとリモートの差分確認

### 3. リモートプッシュ

- 現在のブランチをリモートリポジトリにプッシュ
- 新しいブランチの場合は-uフラグでアップストリーム設定
- プッシュ結果の確認

### 4. プルリクエスト作成

- 引数が指定されている場合はそれをタイトルとして使用
- 引数が未指定の場合は最新コミットメッセージをタイトルとして使用
- gh pr createコマンドでプルリクエスト作成
- 日本語で記載する
- 適切なボディテンプレートを使用（Summary、Test planを含む）
- .github/pull_request_template.mdがあれば、それに従う

### 5. 結果確認・検証

- プルリクエストが正常に作成されたことを確認
- プルリクエストのURLを取得
- リモートリポジトリでプルリクエストが表示されることを確認

### 6. 結果報告・完了処理

- プルリクエストのURLをユーザーに報告
- 作成されたプルリクエストの詳細情報を表示
- 必要に応じて追加の手順（レビュー依頼等）を案内

## 重要注意事項

- 未コミットの変更がある場合はエラーで停止
- GitHub CLIが未認証の場合は認証手順を案内
- リモートリポジトリへのプッシュ権限を確認
- 引数のタイトルが空文字や不正な場合の処理
- 既存のプルリクエストが存在する場合の処理
- ネットワーク接続エラーの適切なハンドリング

## プルリクエストボディテンプレート

```markdown
## Summary
- [変更内容の要約]

## Test plan
- [テスト計画やチェック項目]

🤖 Generated with [Claude Code](https://claude.ai/code)
```

## 使用例

```bash
# 基本的な使用方法（タイトル指定あり）
/create-pr "新機能: ユーザー認証機能を追加"

# タイトル未指定（最新コミットメッセージを使用）
/create-pr

# 結果として以下のような流れで実行される：
# 1. git status, git log で現在状態確認
# 2. git push -u origin [current-branch] でプッシュ
# 3. gh pr create --title "タイトル" --body "テンプレート" でPR作成
# 4. プルリクエストURL表示
```

think hard